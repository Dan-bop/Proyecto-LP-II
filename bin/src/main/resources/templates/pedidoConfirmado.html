<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pedido Confirmado</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light d-flex flex-column min-vh-100">

<div class="container mt-5">
    <div class="text-center mb-4">
        <h2 class="text-success">‚úÖ Pedido confirmado</h2>
        <div th:if="${exito}" class="alert alert-success" th:text="${exito}"></div>
    </div>

    <!-- Datos del pedido -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">Datos del pedido</h5>
        </div>
        <div class="card-body">
            <p><strong>Cliente:</strong> <span th:text="${pedido.usuario.nombre}">Nombre</span></p>
            <p><strong>Direcci√≥n:</strong> <span th:text="${pedido.direccion}">Direcci√≥n</span></p>
            <p><strong>Tel√©fono:</strong> <span th:text="${pedido.telefono}">Tel√©fono</span></p>
            <p><strong>M√©todo de pago:</strong> <span th:text="${pedido.metodoPago}">Pago</span></p>
            <p><strong>Fecha:</strong> 			<span th:text="${fechaFormateada}">Fecha</span></p>
        </div>
    </div>

    <!-- Lista de productos -->
    <h4 class="mb-3">üõç Productos comprados</h4>
    <div class="row row-cols-1 row-cols-md-2 g-4">
        <div class="col" th:each="detalle : ${pedido.detalles}">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title" th:text="${detalle.producto.nombre}">Producto</h5>
                    <p class="card-text">Cantidad: <span th:text="${detalle.cantidad}">1</span></p>
                    <p class="card-text">Subtotal: S/ <span th:text="${#numbers.formatDecimal(detalle.subtotal, 1, 'POINT', 2, 'NONE')}">0.00</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Total -->
    <div class="text-end mt-4">
        <h4>Total pagado: <span class="text-success">S/ <span th:text="${#numbers.formatDecimal(pedido.total, 1, 'POINT', 2, 'NONE')}">0.00</span></span></h4>
    </div>

    <!-- Acciones -->
    <div class="d-flex justify-content-center mt-4 gap-3">
        <a href="/cuenta/pedidos" class="btn btn-success">Ver mis pedidos</a>
        <a href="/catalago" class="btn btn-outline-primary">Seguir comprando</a>
    </div>
</div>

<footer class="bg-dark text-white text-center mt-auto p-3">
    <p>&copy; 2025 Comercial Maysu</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
